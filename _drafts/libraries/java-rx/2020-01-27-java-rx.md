---
layout: post
title: "JavaRX"
date: 2020-01-27 12:00:00 +0300
categories: libraries
permalink: java-rx
---

# JavaRX

## Что это?

`JavaRX` - это библиотека для асинхронных вычислений, основанная событийной модели, используется `observer pattern`.



## Зачем?



## Observer pattern

### Как работает паттер?

- Существует класс `EventSource`, который
  - регистрирует наблюдателей, то есть добавляет их в коллекцию;
  - ждет данные в бесконечном цикле, а при получении рассылает данные всем наблюдателям.
- Класс наблюдателя `Observer`, представляют собой функциональный интерфейс, то есть объект, который будет выполнен в будующем;
  - добавляется в список наблюдателей,
  - выполнет действие, когда данные поступили.

### Как выглядит код?

````java
public class ObserverDemo {

    public static void main(String[] args) {
        EventSource eventSource = new EventSource();

        eventSource.addObserver(event -> System.out.println("Observer 1: Receive number: " + event));
        eventSource.addObserver(event -> System.out.println("Observer 2: Receive number: " + event));

        eventSource.scanSystemIn();
    }
}

class EventSource {

    @FunctionalInterface
    interface Observer {
        void action(String s);
    }

    private List<Observer> observers = new ArrayList<>();

    public void addObserver(Observer action) {
        observers.add(action);
    }

    private void notifyObservers(String value) {
        observers.forEach(o -> o.action(value));
    }

    public void scanSystemIn() {
        System.out.println("Enter message:");
        Scanner scanner = new Scanner(System.in);
        while (scanner.hasNextLine()) {
            String value = scanner.next();
            notifyObservers(value);
        }
    }
}
````



## Основные сущнсти 

### Что такое `Backpressure`?

Когда поток данных проходит асинхронные шаги, каждый шаг может выполнять разные вещи с разной скоростью.

Чтобы не перегружать такие шаги, которые обычно проявляются в увеличенном использовании памяти из-за временной буферизации или необходимости пропускать / отбрасывать данные, применяется так называемое `backpressure` - (обратное давление), которое является формой управления потоком, где шаги могут выражать, сколько элементов они готовы к обработке.

Это позволяет ограничить использование памяти потоками данных в ситуациях, когда для шага, как правило, нет способа узнать, сколько элементов отправит ему вышестоящий поток.

В RxJava выделенный класс `Flowable` предназначен для поддержки обратного давления, а `Observable` предназначен для операций без обратного давления (короткие последовательности, взаимодействия с графическим интерфейсом и т. Д.).

Другие типы, `Single`, `Maybe` и `Completable` не поддерживают `Backpressure` и не должны; всегда есть место для временного хранения одного предмета.







TODO https://github.com/ReactiveX/RxJava





# Вопросы

1. Что будет?




# Источники

1. http://reactivex.io/
2. https://github.com/ReactiveX/RxJava
3. https://github.com/ReactiveX/RxJava/wiki